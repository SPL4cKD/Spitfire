clear all;
clc;

A_true = [0.352,0.864,0.360;-0.864,0.152,0.480;0.360,-0.480,0.800];

r1_1 = [1,0.01,0;1,-0.01,0;0,0,0];
%r1_2 = [1,-0.01,0];

r2_1 = [1,0,0;0,10,0;0,0,0];
%r2_2 = [0,10];

r3_1 = [1,0,0;-0.5,0.8,0;-0.5,-0.8,0];
%r3_2 = [-0.5,0.8,0];
%r3_3 = [-0.5,-0.8,0];

b_1 = (A_true*r1_1);
%b_2 = (A_true*r1_2);

b_2 = (A_true*r2_1);
%b_4 = (A_true*r2_2);

b_3 = (A_true*r3_1);
%b_6 = (A_true*r3_2);
%b_7 = (A_true*r3_3);

B = [b_1*b_2*b_3];

[U,S,V] = svd(B);

epsi = det(U)*det(V);

A_opt = U*diag([1,1,epsi])*V;